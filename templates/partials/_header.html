
  {% load rules %}

<header class="bg-gray-800 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center text-gray-300">
    <!-- Brand Logo -->
    <a href="{% url 'cars:car_list' %}" class="text-2xl font-bold text-indigo-400 hover:text-white">
      BidCar
    </a>

    <!-- Center Nav Links -->
    <nav class="space-x-6 text-lg hidden md:flex">
      <a href="{% url 'cars:car_list' %}" class="hover:text-white">Home</a>
      <a href="{% url 'cars:car_list' %}" class="hover:text-white">Cars</a>
      <a href="{% url 'post_list' %}" class="hover:text-white">Posts</a>
      <a href="{% url 'profile_edit' %}" class="hover:text-white">Edit Profile</a>
    </nav>

    <!-- Right Side: User Dropdown or Sign In -->
    <div class="relative">
      {% if user.is_authenticated %}
        <button id="userDropdownBtn" class="hover:text-white focus:outline-none">
          Welcome, {{ user.username }} â–¼
        </button>
        <div id="userDropdownMenu" class="hidden absolute right-0 mt-2 w-40 bg-white rounded shadow-lg text-gray-700 z-10">
          


            <a href="{% url 'profile_edit' %}" class="block px-4 py-2 hover:bg-gray-100">Edit Profile</a>
          
          <a href="{% url 'account_logout' %}" class="block px-4 py-2 text-red-500 hover:bg-gray-100">Logout</a>
        </div>
      {% else %}
        <a href="{% url 'account_login' %}" class="hover:text-white">Sign In</a>
      {% endif %}
    </div>
  </div>

  <!-- Mobile Nav -->
  <div class="md:hidden px-4 pb-4">
    <nav class="space-y-2 text-gray-300">
      <a href="{% url 'cars:car_list' %}" class="block hover:text-white">Home</a>
      <a href="{% url 'cars:car_create' %}" class="block hover:text-white">New Car</a>
      <a href="{% url 'profile_edit' %}" class="block hover:text-white">Edit Profile</a>
      {% if user.is_authenticated %}
        <a href="{% url 'account_logout' %}" class="block text-red-500 hover:text-red-700">Logout</a>
      {% else %}
        <a href="{% url 'account_login' %}" class="block hover:text-white">Sign In</a>
      {% endif %}
    </nav>
  </div>

  <script>
    // Dropdown Toggle Logic
    document.addEventListener("DOMContentLoaded", function () {
      const btn = document.getElementById("userDropdownBtn");
      const menu = document.getElementById("userDropdownMenu");

      if (btn && menu) {
        btn.addEventListener("click", () => {
          menu.classList.toggle("hidden");
        });

        document.addEventListener("click", (e) => {
          if (!btn.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.add("hidden");
          }
        });
      }
    });
  </script>
</header>
